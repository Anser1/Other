
# 匈牙利匹配算法在目标检测中的直观示例

本文通过一个**目标检测中的真实示例**，详细说明匈牙利匹配算法（Hungarian Algorithm）在预测框（Pred）与真实目标（GT）之间是如何通过**增广路（Augmenting Path）与“挪人”机制**，实现全局最优一对一匹配的。

---

## 1. 问题背景：目标检测中的匹配问题

在目标检测任务中，模型通常会输出多个预测框（Pred），而图像中真实存在的目标（GT）数量是有限的。

核心问题是：

> **如何将预测框与真实目标进行一对一匹配，使整体匹配质量最优？**

---

## 2. 示例设定

### 2.1 真实目标（GT）
GT1, GT2, GT3

### 2.2 模型预测框（Prediction, Pred）

P1, P2, P3

---

## 3. IoU 矩阵

模型预测得到的 IoU（Intersection over Union）矩阵如下：

| Pred \\ GT | GT1 | GT2 | GT3 |
|-----------:|:---:|:---:|:---:|
| **P1**     | 0.9 | 0.6 | 0.1 |
| **P2**     | 0.8 | 0.2 | 0.1 |
| **P3**     | 0.1 | 0.7 | 0.6 |

假设工程中设置匹配规则：

- **IoU ≥ 0.5 才允许建立匹配关系**

---

## 4. 构建二分图模型

### 4.1 二分图的两侧

- 左侧节点（预测框）：`P1, P2, P3`
- 右侧节点（真实目标）：`GT1, GT2, GT3`

---

### 4.2 根据 IoU 阈值建立边

保留 IoU ≥ 0.5 的边后的匹配结果：
P1 → GT1
P1 → GT2
P2 → GT1
P3 → GT2
P3 → GT3

图结构示意如下：
P2 ──▶ GT1 ◀── P1 ──▶ GT2 ◀── P3 ──▶ GT3


---

## 5. 匈牙利算法执行过程（逐步）

### Step 1：尝试匹配 P1

- P1 → GT1
- GT1 当前未匹配

✅ 匹配成功

当前匹配状态：


